pipeline{
   agent any
   environment{
      TERRAFORM_PATH = "/var/lib/jenkins/workspace/deploymentPipeline/Terraform/cluster"
   }
   stages{

     stage("Initializing terraform"){
       steps{
          sh '''
          cd ${TERRAFORM_PATH}
          terraform init
          '''
       }
     }
     stage("Terraform Plan"){
       steps{
          sh '''
          cd ${TERRAFORM_PATH}
          terraform plan -var-file=test.tfvars
          '''
       }
     }
     stage("Terraform apply"){
       steps{
         sh '''
          cd ${TERRAFORM_PATH}
         terraform apply -auto-approve -var-file=test.tfvars
         '''
       }
     }
   }
}